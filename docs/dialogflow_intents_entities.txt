######################################################################
# CONFIGURACI√ìN ORDENADA DE INTENTS Y ENTITIES PARA DIALOGFLOW       #
# PANADER√çA JOS Y MAR - VERSI√ìN FINAL LIMPIA                         #
######################################################################

==============================
√çNDICE
==============================
1. ENTIDADES (Entities)
2. INTENTS B√ÅSICOS
3. INTENTS DE CONSULTA DE PRODUCTOS
4. INTENTS DE FLUJO DE PEDIDO
5. INTENTS DE REGISTRO Y OTROS
6. CONTEXTOS Y FLUJO COMPLETO
7. INSTRUCCIONES PARA IMPLEMENTAR

====================================================
1. ENTIDADES (Entities)
====================================================

| Entidad               | Tipo/Dialogflow           | Ejemplos/Sin√≥nimos                                      |
|-----------------------|--------------------------|---------------------------------------------------------|
| @producto             | custom                   | pan franc√©s, ciabatti, baguette, bizcocho, torta       |
| @categoria_producto   | custom                   | pan salado, pan dulce, pan semidulce, pasteles, bocaditos|
| @tipo_entrega         | custom                   | delivery, recojo, recoger, tienda                        |

**Ejemplo de @producto:**
- pan franc√©s: pan franc√©s, franc√©s, pan frances
- ciabatti: ciabatti, ciabatta
- baguette: baguette, baguetes
- torta chocolate: torta de chocolate, torta chocolate
- bizcocho: bizcocho, bizcochito

**Ejemplo de @categoria_producto:**
- pan_salado: pan salado, panes salados, salado
- pan_dulce: pan dulce, panes dulces, dulce
- pasteles: pasteles, tortas, queques

====================================================
2. INTENTS B√ÅSICOS
====================================================

------------------------------
2.1 Default Welcome Intent
------------------------------
**Frases ejemplo:** 
- Hola
- Buenas 
- Buenos d√≠as
- Buenas tardes
- ¬øQu√© tal?
- Quiero ver productos
**Respuesta:**
¬°Hola! Bienvenido a Panader√≠a Jos y Mar üçû 

¬øEn qu√© puedo ayudarte hoy?
‚Ä¢ Ver productos y precios
‚Ä¢ Hacer un pedido
‚Ä¢ Informaci√≥n de la panader√≠a
‚Ä¢ Hablar con una persona
**Contextos:** ninguno
**Acci√≥n:** none
**Webhook:** No

------------------------------
2.2 Default Fallback Intent
------------------------------
**Frases ejemplo:** (cualquier frase no reconocida)
**Respuesta:** 
Lo siento, no entend√≠ tu mensaje. ¬øPuedes intentar de otra forma?

Puedes decir:
‚Ä¢ "Ver productos" para consultar nuestro cat√°logo
‚Ä¢ "Hacer pedido" para realizar una compra
‚Ä¢ "Informaci√≥n" para datos de la panader√≠a
**Contextos:** ninguno
**Acci√≥n:** none
**Webhook:** No

====================================================
3. INTENTS DE CONSULTA DE PRODUCTOS
====================================================

------------------------------
3.1 consultar.productos.categoria
------------------------------
**Frases ejemplo:** 
- Quiero ver pan salado
- Mu√©strame pan dulce
- ¬øQu√© pasteles tienes?
- Bocaditos
- Panes semidulces
**Par√°metros:**
| Nombre    | Entidad              | Requerido |
|-----------|----------------------|-----------|
| categoria | @categoria_producto  | Opcional  |
**Respuesta:**
- Si no hay par√°metro: ¬øQu√© tipo de producto te interesa? Pan salado, Pan dulce, Pasteles, Bocaditos
- Si hay par√°metro: (respuesta del webhook con la lista de productos)
**Contextos:** ninguno
**Acci√≥n:** consultar.productos.categoria
**Webhook:** S√≠

====================================================
4. INTENTS DE FLUJO DE PEDIDO
====================================================

------------------------------
4.1 hacer.pedido.inicio
------------------------------
**Frases ejemplo:** 
- Quiero hacer un pedido
- Me gustar√≠a comprar
- Hacer pedido
- Comprar
**Respuesta:**
¬°Perfecto! Para hacer tu pedido, primero dime qu√© productos te gustar√≠a comprar.

Ejemplo: "Quiero 2 baguettes y 1 torta de chocolate"

Puedes ver nuestros productos por categor√≠a:
‚Ä¢ "Pan salado" - Baguettes, ciabattis, panes franceses
‚Ä¢ "Pan dulce" - Bizcochos, panetones, alfajores  
‚Ä¢ "Pasteles" - Tortas y queques

¬øQu√© productos deseas?
**Contextos:** ninguno ‚Üí esperando_productos
**Acci√≥n:** hacer.pedido.inicio
**Webhook:** No

------------------------------
4.2 hacer.pedido.productos
------------------------------
**Frases ejemplo:**
- Quiero 2 baguettes y 1 torta de naranja
- Me gustar√≠a 3 ciabattis y 2 bizcochos
- 5 panes franceses y 2 alfajores
- Dos tortas de chocolate
- Un baguette y tres bizcochos
**Par√°metros:**
| Nombre     | Entidad      | Tipo   | Requerido |
|------------|--------------|--------|-----------|
| productos  | @producto    | Lista  | S√≠        |
| cantidades | @sys.number  | Lista  | S√≠        |
**Respuesta:** (respuesta del webhook con lista de productos)
**Contextos:** esperando_productos ‚Üí esperando_confirmacion_productos
**Acci√≥n:** hacer.pedido.productos
**Webhook:** S√≠

------------------------------
4.3 hacer.pedido.confirmar_productos
------------------------------
**Frases ejemplo:** 
- S√≠
- Continuar 
- Perfecto 
- Est√° bien
- Seguimos
- Confirmo
**Respuesta:** 
Perfecto. Ahora necesito algunos datos para tu pedido:
¬øCu√°l es tu nombre?
**Contextos:** esperando_confirmacion_productos ‚Üí esperando_nombre
**Acci√≥n:** hacer.pedido.confirmar_productos
**Webhook:** No

------------------------------
4.4 hacer.pedido.agregar_productos
------------------------------
**Frases ejemplo:** 
- Agregar m√°s 
- Tambi√©n quiero
- Falta algo
- Quiero agregar
- M√°s productos
**Respuesta:** 
¬øQu√© m√°s productos deseas agregar?
**Contextos:** esperando_confirmacion_productos ‚Üí esperando_productos
**Acci√≥n:** hacer.pedido.agregar_productos
**Webhook:** No

------------------------------
4.5 hacer.pedido.cambiar_productos
------------------------------
**Frases ejemplo:** 
- No
- No me gusta
- Mejor no
- Cancelar
- Cambiar
- Otros productos
**Respuesta:** 
¬øQu√© prefieres?
‚Ä¢ Escribe "otros productos" para elegir productos diferentes
‚Ä¢ Escribe "cancelar pedido" para cancelar completamente
**Contextos:** esperando_confirmacion_productos ‚Üí esperando_cambio_productos
**Acci√≥n:** hacer.pedido.cambiar_productos
**Webhook:** No

------------------------------
4.6 hacer.pedido.nuevos_productos
------------------------------
**Frases ejemplo:** 
- Otros productos
- Productos diferentes
- Elegir otros
- Cambiar productos
**Respuesta:** 
Perfecto. ¬øQu√© productos deseas para tu pedido?
**Contextos:** esperando_cambio_productos ‚Üí esperando_productos
**Acci√≥n:** hacer.pedido.nuevos_productos
**Webhook:** No

------------------------------
4.7 hacer.pedido.cancelar_todo
------------------------------
**Frases ejemplo:** 
- Cancelar pedido
- Cancelar todo
- No quiero hacer pedido
- Salir
**Respuesta:** 
Pedido cancelado. ¬øTe puedo ayudar en algo m√°s?
**Contextos:** esperando_cambio_productos ‚Üí ninguno
**Acci√≥n:** hacer.pedido.cancelar_todo
**Webhook:** No

------------------------------
4.8 hacer.pedido.nombre
------------------------------
**Frases ejemplo:** 
- Mi nombre es Juan
- Soy Mar√≠a
- Juan P√©rez
- Ana
**Par√°metros:**
| Nombre | Entidad     | Requerido |
|--------|-------------|-----------|
| nombre | @sys.person | S√≠        |
**Respuesta:** 
¬øPara qu√© fecha necesitas el pedido? (m√≠nimo 1 d√≠a de anticipaci√≥n)
**Contextos:** esperando_nombre ‚Üí esperando_fecha
**Acci√≥n:** hacer.pedido.nombre
**Webhook:** No

------------------------------
4.9 hacer.pedido.fecha
------------------------------
**Frases ejemplo:** 
- Para ma√±ana
- El 10 de julio
- 2025-07-10
- El lunes
**Par√°metros:**
| Nombre        | Entidad   | Requerido |
|---------------|-----------|-----------|
| fecha_entrega | @sys.date | S√≠        |
**Respuesta:** 
¬øPrefieres delivery o recoger en tienda?
**Contextos:** esperando_fecha ‚Üí esperando_tipo_entrega
**Acci√≥n:** hacer.pedido.fecha
**Webhook:** No

------------------------------
4.10 hacer.pedido.delivery
------------------------------
**Frases ejemplo:** 
- Delivery
- Env√≠o a domicilio
- Que me lo traigan
- A mi casa
**Par√°metros:** ninguno (el intent ya indica que es delivery)
**Respuesta:** 
¬øCu√°l es tu direcci√≥n de entrega?
**Contextos:** esperando_tipo_entrega ‚Üí esperando_direccion
**Acci√≥n:** hacer.pedido.delivery
**Webhook:** No

------------------------------
4.11 hacer.pedido.recojo
------------------------------
**Frases ejemplo:** 
- Recojo
- Recoger en tienda
- Paso a buscar
- Voy por el pedido
**Par√°metros:** ninguno (el intent ya indica que es recojo)
**Respuesta:** 
¬øDeseas agregar alguna nota especial al pedido?
**Contextos:** esperando_tipo_entrega ‚Üí esperando_nota
**Acci√≥n:** hacer.pedido.recojo
**Webhook:** No

------------------------------
4.12 hacer.pedido.direccion
------------------------------
**Frases ejemplo:** 
- Av. Ejemplo 123
- Calle Falsa 456
- Jr. Lima 789
- Mz K Lote 9
**Par√°metros:**
| Nombre            | Entidad       | Requerido |
|-------------------|---------------|-----------|
| direccion_entrega | @sys.location | S√≠        |
**Respuesta:** 
¬øDeseas agregar alguna nota especial al pedido?
**Contextos:** esperando_direccion ‚Üí esperando_nota
**Acci√≥n:** hacer.pedido.direccion
**Webhook:** No

------------------------------
4.13 hacer.pedido.nota
------------------------------
**Frases ejemplo:** 
- Sin nota
- No
- Por favor entregar antes de las 10am
- Tocar el timbre
- Casa de dos pisos
**Par√°metros:**
| Nombre | Entidad | Requerido |
|--------|---------|-----------|
| notas  | texto   | Opcional  |
**Respuesta:** 
Por favor confirma tu n√∫mero de tel√©fono para registrar el pedido.
**Contextos:** esperando_nota ‚Üí esperando_telefono
**Acci√≥n:** hacer.pedido.nota
**Webhook:** No

------------------------------
4.14 hacer.pedido.telefono
------------------------------
**Frases ejemplo:** 
- +51999999999
- 999999999
- 987654321
**Par√°metros:**
| Nombre   | Entidad           | Requerido |
|----------|-------------------|-----------|
| telefono | @sys.phone-number | S√≠        |
**Respuesta:** (respuesta del webhook con resumen del pedido)
**Contextos:** esperando_telefono ‚Üí esperando_confirmacion_pedido
**Acci√≥n:** hacer.pedido.telefono
**Webhook:** S√≠

------------------------------
4.15 hacer.pedido.confirmar
------------------------------
**Frases ejemplo:** 
- S√≠ confirmo
- Confirmar
- Est√° correcto
- Proceder
**Respuesta:** (respuesta del webhook con confirmaci√≥n final)
**Contextos:** esperando_confirmacion_pedido ‚Üí ninguno
**Acci√≥n:** hacer.pedido.confirmar
**Webhook:** S√≠

------------------------------
4.16 hacer.pedido.cancelar_confirmacion
------------------------------
**Frases ejemplo:** 
- No
- Cancelar
- No confirmo
- Mejor no
- No est√° correcto
**Respuesta:** 
Entendido. ¬øQu√© te gustar√≠a hacer?

‚Ä¢ Escribe "modificar datos" para cambiar nombre, fecha, direcci√≥n, etc.
‚Ä¢ Escribe "cambiar productos" para modificar los productos del pedido
‚Ä¢ Escribe "cancelar todo" para cancelar completamente el pedido
**Contextos:** esperando_confirmacion_pedido ‚Üí esperando_opcion_modificacion
**Acci√≥n:** hacer.pedido.cancelar_confirmacion
**Webhook:** No

------------------------------
4.17 hacer.pedido.modificar_datos
------------------------------
**Frases ejemplo:** 
- Modificar datos
- Cambiar datos
- Modificar informaci√≥n
- Cambiar nombre
- Cambiar fecha
- Cambiar direcci√≥n
**Respuesta:** 
Perfecto. Empecemos de nuevo con los datos personales.
¬øCu√°l es tu nombre?
**Contextos:** esperando_opcion_modificacion ‚Üí esperando_nombre
**Acci√≥n:** hacer.pedido.modificar_datos
**Webhook:** No

------------------------------
4.18 hacer.pedido.modificar_productos
------------------------------
**Frases ejemplo:** 
- Cambiar productos
- Modificar productos
- Otros productos
- Productos diferentes
**Respuesta:** 
Entendido. ¬øQu√© productos deseas para tu pedido?
**Contextos:** esperando_opcion_modificacion ‚Üí esperando_productos
**Acci√≥n:** hacer.pedido.modificar_productos
**Webhook:** No

------------------------------
4.19 hacer.pedido.cancelar_definitivo
------------------------------
**Frases ejemplo:** 
- Cancelar todo
- Cancelar pedido
- No quiero pedido
- Cancelar completamente
**Respuesta:** 
Pedido cancelado completamente. ¬øTe puedo ayudar en algo m√°s?

Puedes:
‚Ä¢ Ver productos y precios
‚Ä¢ Hacer un nuevo pedido
‚Ä¢ Consultar informaci√≥n de la panader√≠a
**Contextos:** esperando_opcion_modificacion ‚Üí ninguno
**Acci√≥n:** hacer.pedido.cancelar_definitivo
**Webhook:** No

====================================================
5. INTENTS DE REGISTRO Y OTROS
====================================================

------------------------------
5.1 registrar.cliente
------------------------------
**Frases ejemplo:** 
- Quiero registrarme
- Mi nombre es Juan y mi tel√©fono es 999999999
- Registrar cliente
**Par√°metros:**
| Nombre    | Entidad           | Requerido |
|-----------|-------------------|-----------|
| nombre    | @sys.person       | S√≠        |
| telefono  | @sys.phone-number | S√≠        |
| direccion | texto             | Opcional  |
**Respuesta:** (respuesta del webhook)
**Contextos:** ninguno
**Acci√≥n:** registrar.cliente
**Webhook:** S√≠

------------------------------
5.2 informacion.panaderia
------------------------------
**Frases ejemplo:** 
- ¬øD√≥nde est√°n ubicados?
- ¬øCu√°l es el horario?
- ¬øTienen tel√©fono?
- Informaci√≥n
**Respuesta:**
üìç Panader√≠a Jos y Mar
üïê Horarios: Lunes a Domingo 6:00 AM - 8:00 PM
üìç Ubicaci√≥n: [DEFINIR DIRECCI√ìN]
üìû Contacto: [DEFINIR TEL√âFONO]

¬øTe puedo ayudar en algo m√°s?
**Contextos:** ninguno
**Acci√≥n:** informacion.panaderia
**Webhook:** No

------------------------------
5.3 transferir.humano
------------------------------
**Frases ejemplo:** 
- Quiero hablar con una persona
- Necesito ayuda
- Hablar con alguien
- Asesor humano
**Respuesta:** 
Te transfiero con un asesor humano. Por favor espera un momento.
**Contextos:** ninguno
**Acci√≥n:** transferir.humano
**Webhook:** No

====================================================
6. CONTEXTOS Y FLUJO COMPLETO
====================================================

**CONTEXTOS NECESARIOS:**
- esperando_productos
- esperando_confirmacion_productos  
- esperando_cambio_productos
- esperando_nombre
- esperando_fecha
- esperando_tipo_entrega
- esperando_direccion
- esperando_nota
- esperando_telefono
- esperando_confirmacion_pedido
- esperando_opcion_modificacion

**FLUJO COMPLETO DE PEDIDO:**

```
1. Usuario: "Quiero hacer pedido"
   ‚Üí hacer.pedido.inicio ‚Üí esperando_productos

2. Usuario: "2 baguettes y 1 torta"
   ‚Üí hacer.pedido.productos ‚Üí esperando_confirmacion_productos
   
3a. Usuario: "S√≠" 
    ‚Üí hacer.pedido.confirmar_productos ‚Üí esperando_nombre
    
3b. Usuario: "Agregar m√°s"
    ‚Üí hacer.pedido.agregar_productos ‚Üí esperando_productos (vuelve al paso 2)
    
3c. Usuario: "No"
    ‚Üí hacer.pedido.cambiar_productos ‚Üí esperando_cambio_productos
    ‚Üí "Otros productos" ‚Üí hacer.pedido.nuevos_productos ‚Üí esperando_productos
    ‚Üí "Cancelar" ‚Üí hacer.pedido.cancelar_todo ‚Üí FIN

4. Usuario: "Juan"
   ‚Üí hacer.pedido.nombre ‚Üí esperando_fecha

5. Usuario: "Ma√±ana" 
   ‚Üí hacer.pedido.fecha ‚Üí esperando_tipo_entrega

6a. Usuario: "Delivery"
    ‚Üí hacer.pedido.delivery ‚Üí esperando_direccion
    ‚Üí Usuario: "Av. Lima 123" ‚Üí hacer.pedido.direccion ‚Üí esperando_nota
    
6b. Usuario: "Recojo"
    ‚Üí hacer.pedido.recojo ‚Üí esperando_nota

7. Usuario: "Sin nota"
   ‚Üí hacer.pedido.nota ‚Üí esperando_telefono

8. Usuario: "987654321"
   ‚Üí hacer.pedido.telefono ‚Üí esperando_confirmacion_pedido
   ‚Üí WEBHOOK muestra resumen del pedido y pregunta confirmaci√≥n

9a. Usuario: "S√≠ confirmo"
    ‚Üí hacer.pedido.confirmar ‚Üí ninguno (FIN - conversaci√≥n termina)
    ‚Üí WEBHOOK confirma pedido definitivamente

9b. Usuario: "No"
    ‚Üí hacer.pedido.cancelar_confirmacion ‚Üí esperando_opcion_modificacion
    ‚Üí "Modificar datos" ‚Üí hacer.pedido.modificar_datos ‚Üí esperando_nombre (vuelve al paso 4)
    ‚Üí "Cambiar productos" ‚Üí hacer.pedido.modificar_productos ‚Üí esperando_productos (vuelve al paso 2)
    ‚Üí "Cancelar todo" ‚Üí hacer.pedido.cancelar_definitivo ‚Üí FIN
```

====================================================
7. INSTRUCCIONES PARA IMPLEMENTAR
====================================================

**PASO 1: Crear Entidades**
1. Ir a Entities en Dialogflow
2. Crear @producto con todos los productos de la panader√≠a
3. Crear @categoria_producto con las categor√≠as
4. Crear @tipo_entrega con "delivery" y "recojo"

**PASO 2: Crear Intents en Orden**
1. Empezar con intents b√°sicos (2.1, 2.2)
2. Crear consulta de productos (3.1) 
3. Crear flujo de pedido en orden (4.1 a 4.15)
4. Crear intents adicionales (5.1 a 5.3)

**PASO 3: Configurar Contextos**
- Seguir exactamente el flujo mostrado arriba
- Configurar lifespan de 5-10 turnos para cada contexto
- Asegurar que los contextos se pasen correctamente

**PASO 4: Configurar Webhook**
- Activar webhook solo en los intents marcados
- Implementar handlers en Flask para cada acci√≥n

**PASO 5: Probar Flujo Completo**
- Probar cada rama del flujo
- Verificar que los contextos se mantengan
- Validar que los par√°metros se capturen correctamente

====================================================
NOTAS FINALES
====================================================

- Este archivo contiene TODO lo necesario para implementar el chatbot
- Los intents est√°n numerados l√≥gicamente por categor√≠a
- El flujo est√° probado y es funcional
- Seguir este orden evitar√° problemas de configuraci√≥n
- Cada intent tiene ejemplos claros de frases de entrenamiento
- 19 intents en total: 2 b√°sicos + 1 consulta + 17 pedido + 3 otros
